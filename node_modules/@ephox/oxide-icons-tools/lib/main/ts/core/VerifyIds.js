"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.verifyIds = void 0;
const chalk = require("chalk");
const log = require("fancy-log");
const xmldom_1 = require("@xmldom/xmldom");
const Configuration_1 = require("../Configuration");
const requiresId = (svg) => !!Configuration_1.default.requiredIds[svg.name];
const hasId = (svg, id) => {
    const domParser = new xmldom_1.DOMParser();
    const domSvg = domParser.parseFromString(svg.data, 'image/svg+xml');
    return !!domSvg.getElementById(id);
};
const verifyIds = (svgs) => {
    const missing = [];
    svgs.filter(requiresId).forEach((svg) => {
        if (!hasId(svg, Configuration_1.default.requiredIds[svg.name])) {
            missing.push(`  '${svg.name}' does not have an id equal to '${Configuration_1.default.requiredIds[svg.name]}'`);
        }
    });
    const numMissing = missing.length;
    if (numMissing > 0) {
        log(`'${chalk.cyan(Configuration_1.default.pluginName)}' Found ${numMissing} missing ID${(numMissing > 1 ? 's' : '')}. Is this intentional?\n` + missing.join('\n'));
    }
};
exports.verifyIds = verifyIds;
//# sourceMappingURL=VerifyIds.js.map